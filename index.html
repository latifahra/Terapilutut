
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Smart LED & Motor Control</title>

  <!-- Firebase SDK v9 COMPAT -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 40px;
    }
    input {
      width: 300px;
    }
    button {
      padding: 15px 30px;
      font-size: 16px;
      margin: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h2>Kontrol LED (PWM)</h2>
  <p>Nilai LED: <span id="ledVal">0</span>%</p>
  <input type="range" min="0" max="100" value="0" id="ledSlider">

  <hr>

  <h2>Kontrol Motor Getar</h2>
  <button onclick="setMotor('on')">MOTOR ON</button>
  <button onclick="setMotor('off')">MOTOR OFF</button>

<script>
  // ===============================
  // FIREBASE CONFIG
  // ===============================
  const firebaseConfig = {
  apiKey: "AIzaSyBFHqbt1P9ur4I8A1rKlQ5sLAolRX25sgo",
  authDomain: "terapilutut-4072a.firebaseapp.com",
  databaseURL: "https://terapilutut-4072a-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "terapilutut-4072a",
  storageBucket: "terapilutut-4072a.firebasestorage.app",
  messagingSenderId: "403537375082",
  appId: "1:403537375082:web:3d0c4ddff22f47129cff13"
  };

  // Init Firebase (v9 compat)
  firebase.initializeApp(firebaseConfig);
  const database = firebase.database();

  // ===============================
  // LED CONTROL
  // ===============================
  const slider = document.getElementById("ledSlider");
  const ledText = document.getElementById("ledVal");

  slider.addEventListener("input", function () {
    const value = parseInt(this.value);
    ledText.innerHTML = value;

    database.ref("device/led").set(value);
  });

  // ===============================
  // MOTOR CONTROL
  // ===============================
  function setMotor(state) {
    database.ref("device/motor").set(state);
  }

  // ===============================
  // REALTIME SYNC (OPTIONAL)
  // ===============================
  database.ref("device/led").on("value", function (snapshot) {
    if (snapshot.exists()) {
      slider.value = snapshot.val();
      ledText.innerHTML = snapshot.val();
    }
  });
</script>

</body>
</html>
